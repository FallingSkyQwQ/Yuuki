# Yuuki Launcher Initial Implementation Tasks

## 阶段1: 基础架构搭建 (Week 1-2)

### 1.1 Rust核心项目结构
- [x] 创建Rust workspace结构，包含所有crates
- [x] 设置yuuki-core主crate，暴露FFI接口
- [x] 配置flutter_rust_bridge代码生成
- [x] 创建基础的错误处理和日志系统

### 1.2 Flutter项目配置
- [x] 配置Flutter项目，集成Rust FFI
- [x] 设置Riverpod状态管理
- [x] 创建基础的路由和导航结构
- [ ] 配置平台特定的构建设置（Windows/macOS/Linux）

### 1.3 数据模型和存储
- [x] 定义核心的数据模型（Profile, Account, Settings等）
- [x] 实现YAML/JSON配置文件读写
- [x] 创建数据验证和序列化逻辑
- [x] 设置加密存储（libsodium/age）

## 阶段2: 认证系统实现 (Week 3-4)

### 2.1 Microsoft认证
- [x] 实现Microsoft OAuth设备代码流程
- [x] 创建令牌刷新机制
- [x] 集成平台原生凭据存储
- [x] 编写认证流程的UI界面

### 2.2 离线认证
- [x] 实现离线账户创建逻辑
- [x] 添加受限功能提示
- [x] 创建离线账户管理界面

### 2.3 LittleSkin认证
- [x] 实现Yggdrasil认证协议
- [x] 支持自定义认证服务器配置
- [x] 集成换肤功能（可选）
- [x] 创建LittleSkin配置UI

### 2.4 多账户管理
- [x] 实现账户存储和切换逻辑
- [x] 创建账户列表UI
- [ ] 添加账户云备份功能（可选）

## 阶段3: 实例管理 (Week 5-6)

### 3.1 实例创建和配置
- [x] 实现实例数据模型和存储
- [x] 创建实例配置UI（版本选择、加载器配置）
- [x] 实现Java运行时管理
- [x] 添加JVM参数配置界面
- [ ] 实现Java运行时管理
- [ ] 添加JVM参数配置界面

### 3.2 版本和加载器支持
- [x] 集成Minecraft版本清单API
- [x] 实现Forge/NeoForge/Fabric/Quilt加载器支持
- [x] 创建版本兼容性检查
- [ ] 添加OptiFine/Iris参数处理

### 3.3 实例导入/导出
- [ ] 实现实例打包逻辑（ZIP格式）
- [ ] 创建manifest文件生成
- [ ] 实现实例导入解析
- [ ] 添加导入/导出UI界面

### 3.4 实例克隆
- [ ] 实现实例复制逻辑
- [ ] 处理资源文件复制
- [ ] 生成新的实例ID
- [ ] 创建克隆操作UI

## 阶段4: Modrinth集成 (Week 7-8)

### 4.1 Modrinth API客户端
- [x] 创建Modrinth API客户端
- [x] 实现搜索功能（支持过滤和排序）
- [x] 添加项目详情获取
- [x] 处理API速率限制

### 4.2 搜索和浏览界面
- [ ] 创建搜索UI（支持分类、标签、版本过滤）
- [ ] 实现项目卡片组件
- [ ] 添加项目详情页面
- [ ] 创建预览功能（截图、描述）

### 4.3 依赖解析和下载
- [ ] 实现依赖关系图解析
- [ ] 创建版本兼容性检查
- [ ] 实现批量下载逻辑
- [ ] 添加冲突检测和解决方案

### 4.4 更新管理
- [ ] 实现更新检查机制
- [ ] 创建更新UI界面
- [ ] 添加批量更新功能
- [ ] 实现更新日志显示

## 阶段5: 下载系统 (Week 9-10)

### 5.1 并发下载管理
- [ ] 实现多线程下载器
- [ ] 添加下载队列管理
- [ ] 实现断点续传功能
- [ ] 创建下载进度UI

### 5.2 镜像源管理
- [ ] 实现官方源和BMCLAPI切换
- [ ] 添加源健康检查
- [ ] 实现自动故障转移
- [ ] 创建源管理UI

### 5.3 文件校验和验证
- [ ] 实现SHA1/SHA256校验
- [ ] 添加文件完整性验证
- [ ] 处理校验失败重试
- [ ] 记录校验日志

### 5.4 带宽和I/O管理
- [ ] 实现带宽限制功能
- [ ] 添加I/O限流机制
- [ ] 优化系统资源使用
- [ ] 创建网络设置UI

## 阶段6: 启动器核心 (Week 11-12)

### 6.1 启动流程实现
- [ ] 实现assets/libraries校验
- [ ] 集成Java运行时选择
- [ ] 创建启动参数装配
- [ ] 添加进程监控功能

### 6.2 性能优化
- [ ] 实现JVM预设配置
- [ ] 添加大整合包优化
- [ ] 创建性能监控
- [ ] 实现缓存优化

### 6.3 崩溃处理
- [ ] 实现崩溃检测
- [ ] 创建崩溃报告收集
- [ ] 添加崩溃分析功能
- [ ] 实现诊断建议

### 6.4 日志和诊断
- [ ] 实现实时日志流
- [ ] 添加日志过滤功能
- [ ] 创建系统体检功能
- [ ] 添加一键修复建议

## 阶段7: UI设计和交互 (Week 13-14)

### 7.1 LiquidGlass材质
- [ ] 实现Flutter玻璃效果
- [ ] 添加动态模糊和高光
- [ ] 创建性能降级策略
- [ ] 优化渲染性能

### 7.2 响应式设计
- [ ] 实现桌面端Sidebar导航
- [ ] 创建移动端TabBar适配
- [ ] 添加动态收缩行为
- [ ] 优化触摸交互

### 7.3 可访问性
- [ ] 实现全键盘导航
- [ ] 添加屏幕阅读器支持
- [ ] 创建高对比度模式
- [ ] 实现弱动效模式

### 7.4 渐进披露
- [ ] 实现默认简洁视图
- **WHEN** 用户需要高级功能时平滑展开
- [ ] 创建动画过渡效果
- [ ] 优化信息架构

## 阶段8: 测试和优化 (Week 15-16)

### 8.1 单元测试
- [ ] 编写Rust核心模块测试
- [ ] 创建Flutter组件测试
- [ ] 实现Mock服务和数据
- [ ] 达到80%代码覆盖率

### 8.2 集成测试
- [ ] 测试端到端启动流程
- [ ] 验证Modrinth集成
- [ ] 测试多平台兼容性
- [ ] 验证性能指标

### 8.3 性能优化
- [ ] 优化冷启动时间（≤1.5s）
- [ ] 提升大型整合包解析速度（≤3s）
- [ ] 优化内存使用
- [ ] 减少CPU占用

### 8.4 打包和发布
- [ ] 配置Windows MSIX打包
- [ ] 设置macOS Notarization
- [ ] 创建Linux AppImage/Flatpak
- [ ] 实现自动更新机制

## 验收标准

### 功能完整性
- ✅ 所有核心功能按规格实现
- ✅ UI符合LiquidGlass设计规范
- ✅ 支持所有指定的认证方式
- ✅ Modrinth集成完整可用

### 性能要求
- ✅ 冷启动时间 ≤ 1.5秒
- ✅ 大型整合包解析 ≤ 3秒
- ✅ 依赖解析 ≤ 1秒
- ✅ 下载速度达到网络上限

### 质量要求
- ✅ 单元测试覆盖率 ≥ 80%
- ✅ 无严重bug
- ✅ 内存泄漏检查通过
- ✅ 跨平台兼容性验证

### 用户体验
- ✅ 界面流畅，动画平滑
- ✅ 响应式设计适配各种屏幕
- ✅ 可访问性支持完整
- ✅ 错误处理友好
